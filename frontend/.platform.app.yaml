name: frontend
type: nodejs:8.9

dependencies:
  nodejs:
    pm2: "^2.0.0"

web:
  commands:
    start: "pm2 start ecosystem.config.js --only nuxt-prod"
    #in this setup you will find your application stdout and stderr in /app/run/logs
  locations:
    "/":
      passthru: false
      root: "public"
      # Whether to allow files not matching a rule or not.
      allow: true
      rules:
        \.(css|js|gif|jpe?g|png|ttf|eot|woff2?|otf|html|ico|svg?)$:
          allow: true
        ^/robots\.txt$:
          allow: true

mounts:
  "/run": "shared:files/run"

disk: 512

# The hooks executed at various points in the lifecycle of the application.
hooks:
    build: |
      npm run build